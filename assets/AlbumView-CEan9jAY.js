import{u as J,L as K,a as C}from"./LoadingEffect-CtI6JVtD.js";import{r as o,d as O,s as Q,f as U,a as X,g as b,i as u,j as Y,k as Z,l as s,v as c,q as ss,F as as,t as es,u as L,A as ls,n as R,x as p}from"./index-uAn1OuIp.js";import{u as ts}from"./musicPlayer-DaexMZiW.js";import{_ as os,H as is,F as us}from"./FooterView-BdGcuZQ6.js";import{P as cs}from"./PlayAlbum-D5bsB9J0.js";import{P as ns}from"./PlayTrackMusic-Es6ZMCWf.js";const rs={class:"wrapper"},ds={class:"album-banner pb-lg-13 pb-9"},ms=["src"],fs={class:"album-content pt-8 pt-lg-10"},gs={class:"container position-relative"},vs={class:"row mt-lg-9"},_s={class:"col-lg-4"},bs={class:"image-area d-flex flex-md-column align-items-start"},ps={class:"album mb-lg-5 mb-3"},hs=["src","alt"],Ms={class:"singer d-flex flex-column ms-6 ms-md-0"},ks={class:"d-flex align-items-center"},ys=["src"],As={class:"fs-6 fs-md-4 ms-3"},xs={class:"mt-md-5 mt-3 fs-7 fs-sm-6"},Ps={class:"col-lg-8"},Ts={class:"fs-5 fs-md-3 fs-lg-2"},ws={class:"play-album-area mt-lg-8 mt-5"},Cs={class:"album-all-tracks my-8 mt-lg-16 pt-lg-10 mt-lg-19"},Ls={class:"list-group list-group-flush mt-6"},Rs={class:"fw-bolder text-warning fs-5 fs-md-4"},Ds={class:"album-single-info d-flex align-items-center ms-lg-5 ms-3"},Vs={class:"ms-lg-4 ms-2"},Bs={class:"single-name fs-6 fs-md-5"},Es=["onClick"],Ss={__name:"AlbumView",setup($s){const D=J(),{getConfigAuthToken:V}=D,v=o({}),t=o({isLoading:!1,fullPage:!0,bgColor:"rgba(0,0,0,0.9)"}),B=O(()=>({active:t.value.isLoading,fullPage:t.value.fullPage,...t.value.bgColor&&{backgroundColor:t.value.bgColor}})),E=()=>{t.value.isLoading=!0},S=()=>{t.value.isLoading=!1},$=ls(),e=o({}),F=l=>{E(),C.get(`https://api.kkbox.com/v1.1/albums/${l}?territory=TW`,v.value).then(a=>{e.value=a.data,N(e.value.id)})},h=o([]),N=l=>{C.get(`https://api.kkbox.com/v1.1/albums/${l}/tracks?territory=TW`,v.value).then(a=>{h.value=a.data.data,S()})},M=ts(),{singleRankData:n,isMusicPlaying:r,musicAlbumData:d,isMusicAlbumPlaying:_}=Q(M),{resetMusicTrackData:H,resetMusicAlbumData:W}=M,i=o(null),m=o(null),j=l=>{d.value.id!==l&&(r.value&&i.value.closeMusicModal(),d.value.id=l,d.value.autoplay=!0,_.value=!0,R(()=>{setTimeout(()=>{m.value.showMusicAlbumModal()},300)}))},q=()=>{W()},z=l=>{n.value.id!==l&&(r.value?i.value.closeMusicModal():_.value&&m.value.closeMusicAlbumModal(),n.value.id=l,n.value.autoplay=!0,r.value=!0,R(()=>{setTimeout(()=>{i.value.showMusicModal()},300)}))},I=()=>{H()},G=()=>{_.value&&m.value.closeMusicAlbumModal(),r.value&&i.value.closeMusicModal()};return U(()=>{G()}),X(async()=>{v.value=await V(),F($.params.albumId)}),(l,a)=>{var k,y,A,x,P,T,w;return p(),b("div",rs,[u(K,Y(Z(B.value)),null,16),u(is),s("main",null,[s("section",ds,[s("img",{src:(k=e.value.images)==null?void 0:k[2].url,class:"bg-album"},null,8,ms),s("div",fs,[s("div",gs,[s("div",vs,[s("div",_s,[s("div",bs,[s("div",ps,[s("img",{src:(y=e.value.images)==null?void 0:y[1].url,class:"rounded-5",alt:(A=e.value)==null?void 0:A.name},null,8,hs)]),s("div",Ms,[s("div",ks,[s("img",{src:(P=(x=e.value.artist)==null?void 0:x.images)==null?void 0:P[0].url,class:"rounded-circle",alt:""},null,8,ys),s("h3",As,c((T=e.value.artist)==null?void 0:T.name),1)]),s("p",xs," 發行日 : "+c((w=e.value)==null?void 0:w.release_date),1)])])]),s("div",Ps,[s("h2",Ts,c(e.value.name),1),s("div",ws,[s("button",{type:"button",class:"btn btn-info rounded-5",onClick:a[0]||(a[0]=f=>{var g;return j((g=e.value)==null?void 0:g.id)})},a[1]||(a[1]=[ss(" 播放專輯 "),s("i",{class:"bi bi-play-btn-fill"},null,-1)]))]),s("div",Cs,[a[3]||(a[3]=s("h4",{class:"fs-5 fs-md-4 text-warning pt-6"},"全專輯曲目",-1)),s("ul",Ls,[(p(!0),b(as,null,es(h.value,(f,g)=>(p(),b("li",{class:"list-group-item d-flex align-items-center",key:f.id},[s("h5",Rs,c(g+1),1),s("div",Ds,[s("div",Vs,[s("h4",Bs,c(f.name),1)])]),s("button",{type:"button",class:"btn btn-custom-play ms-auto",onClick:Fs=>z(f.id)},a[2]||(a[2]=[s("i",{class:"bi bi-play-fill"},null,-1)]),8,Es)]))),128))])])])])])]),u(cs,{ref_key:"musicAlbumModalRef",ref:m,"music-album-data":L(d),onEmitCloseMusicAlbumModal:q},null,8,["music-album-data"]),u(ns,{ref_key:"musicTrackModalRef",ref:i,"single-rank-data":L(n),onEmitCloseTrackMusicModal:I},null,8,["single-rank-data"])])]),u(us)])}}},Is=os(Ss,[["__scopeId","data-v-9e05e638"]]);export{Is as default};
