import{r as o,d as K,s as A,a as j,f as H,g as t,i as d,j as U,k as W,l as e,F as g,t as y,v as c,u as Y,x as l,z as T,B as Z,q as w,C as P,n as q}from"./index-B3SlTKs7.js";import{u as I,L as G,a as L}from"./LoadingEffect-CVVSGwC_.js";import{u as J}from"./musicPlayer-DBOyZfDV.js";import{_ as O,H as Q,F as X}from"./FooterView-CS8J6Q0Z.js";import{P as ss}from"./PlayTrackMusic-so9ShwAA.js";const es={class:"ranking-page py-lg-13 py-9"},as={class:"container"},ts={class:"row gy-3"},ls={class:"col-lg-3 d-none d-lg-block"},os={class:"list-group"},ns=["onClick"],is={key:0,class:"badge text-bg-warning rounded-pill"},cs={class:"col d-block d-lg-none"},rs={class:"list-unstyled d-flex gap-md-2 gap-1 flex-wrap mb-lg-4 mb-3"},us=["onClick"],ds={key:0,class:"badge text-bg-warning rounded-pill"},gs={class:"col-lg-9"},fs={class:"text-center fs-lg-2 fs-3"},_s={class:"list-group list-group-flush ranking-list mt-6"},vs={class:"fw-bolder text-warning fs-5 fs-md-4"},ks={class:"ranking-single-info d-flex align-items-center ms-lg-5 ms-3"},ms=["src","alt"],ps={class:"ms-lg-4 ms-2"},hs={class:"single-name fs-6 fs-md-5 mb-1"},bs={class:"singer-name fs-7 fs-md-6"},ys=["onClick"],Cs={__name:"RankingView",setup(xs){const R=I(),{getConfigAuthToken:N}=R,f=o({}),n=o({isLoading:!1,fullPage:!0,bgColor:""}),V=K(()=>({active:n.value.isLoading,fullPage:n.value.fullPage,...n.value.bgColor&&{backgroundColor:n.value.bgColor}})),B=()=>{n.value.isLoading=!0},E=()=>{n.value.isLoading=!1},C=o([]),_=a=>{B(),L.get(`https://api.kkbox.com/v1.1/charts/${a}/tracks?territory=TW`,f.value).then(i=>{C.value=i.data.data,E()})},v=o([]),D=()=>{L.get("https://api.kkbox.com/v1.1/charts?territory=TW",f.value).then(a=>{v.value=a.data.data})},x=J(),{singleRankData:r,isMusicPlaying:k}=A(x),{resetMusicTrackData:$}=x,u=o(null),z=async a=>{r.value.id!==a&&(k.value&&u.value.closeMusicModal(),r.value.id=a,r.value.autoplay=!0,k.value=!0,q(()=>{setTimeout(()=>{u.value.showMusicModal()},300)}))},S=()=>{$()},m=o(""),p=a=>{m.value=a},M=o("綜合新歌即時榜"),h=a=>{M.value=a},F=()=>{k.value&&u.value.closeMusicModal()};return j(async()=>{f.value=await N(),_("LZPhK2EyYzN15dU-PT"),D(),h("綜合新歌即時榜"),p("LZPhK2EyYzN15dU-PT")}),H(()=>{F()}),(a,i)=>(l(),t(g,null,[d(G,U(W(V.value)),null,16),d(Q),e("section",es,[e("div",as,[i[1]||(i[1]=e("h2",{class:"fs-lg-2 fs-3 mb-7 mb-lg-9"},"KK music 熱門排行榜",-1)),e("div",ts,[e("div",ls,[e("div",os,[(l(!0),t(g,null,y(v.value,s=>(l(),t("a",{href:"#",key:s.id,class:T(["list-group-item list-group-item-action d-flex justify-content-between align-items-center link-light",{active:m.value===s.id}]),onClick:Z(b=>{p(s.id),h(s.title),_(s.id)},["prevent"])},[w(c(s.title)+" ",1),s.title==="綜合新歌即時榜"?(l(),t("span",is,"最熱門")):P("",!0)],10,ns))),128))])]),e("div",cs,[e("ul",rs,[(l(!0),t(g,null,y(v.value,s=>(l(),t("li",{key:s.id},[e("a",{class:T(["btn border btn-custom-info text-nowrap",{active:m.value===s.id}]),onClick:b=>{p(s.id),h(s.title),_(s.id)}},[w(c(s.title)+" ",1),s.title==="綜合新歌即時榜"?(l(),t("span",ds,"最熱門")):P("",!0)],10,us)]))),128))])]),e("div",gs,[e("h2",fs,c(M.value),1),e("ul",_s,[(l(!0),t(g,null,y(C.value,(s,b)=>(l(),t("li",{class:"list-group-item d-flex align-items-center ranking-item",key:s.id},[e("h4",vs,c(b+1),1),e("div",ks,[e("img",{src:s.album.artist.images[0].url,alt:s.album.artist.name},null,8,ms),e("div",ps,[e("h5",hs,c(s.name),1),e("h6",bs,c(s.album.artist.name),1)])]),e("button",{type:"button",class:"btn btn-custom-play ms-auto",onClick:Ms=>z(s.id)},i[0]||(i[0]=[e("i",{class:"bi bi-play-fill"},null,-1)]),8,ys)]))),128))])])])]),d(ss,{ref_key:"musicTrackModalRef",ref:u,"single-rank-data":Y(r),onEmitCloseTrackMusicModal:S},null,8,["single-rank-data"])]),d(X)],64))}},Ns=O(Cs,[["__scopeId","data-v-448a5d62"]]);export{Ns as default};
