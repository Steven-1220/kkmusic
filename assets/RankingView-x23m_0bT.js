import{r as l,d as j,s as H,a as U,f as W,g as t,i as d,j as Y,k as Z,l as e,F as g,t as y,v as c,u as q,n as x,x as o,z as M,B as I,q as P,C as L}from"./index-uAn1OuIp.js";import{u as G,L as J,a as R}from"./LoadingEffect-CtI6JVtD.js";import{u as O}from"./musicPlayer-DaexMZiW.js";import{_ as Q,H as X,F as ss}from"./FooterView-BdGcuZQ6.js";import{P as es}from"./PlayTrackMusic-Es6ZMCWf.js";const as={class:"ranking-page py-lg-13 py-9"},ts={class:"container"},os={class:"row gy-3"},ls={class:"col-lg-3 d-none d-lg-block"},ns={class:"list-group"},is=["onClick"],cs={key:0,class:"badge text-bg-warning rounded-pill"},rs={class:"col d-block d-lg-none"},us={class:"list-unstyled d-flex gap-md-2 gap-1 flex-wrap mb-lg-4 mb-3"},ds=["onClick"],gs={key:0,class:"badge text-bg-warning rounded-pill"},fs={class:"col-lg-9"},vs={class:"text-center fs-lg-2 fs-3"},_s={class:"list-group list-group-flush ranking-list mt-6"},ks={class:"fw-bolder text-warning fs-5 fs-md-4"},ps={class:"ranking-single-info w-100 d-flex align-items-center ms-lg-5 ms-3"},ms=["src","alt"],hs={class:"ms-lg-4 ms-2"},bs={class:"single-name fs-6 fs-md-5 mb-1"},ys={class:"singer-name fs-7 fs-md-6"},Ts=["onClick"],Cs={__name:"RankingView",setup(ws){const N=G(),{getConfigAuthToken:V}=N,f=l({}),n=l({isLoading:!1,fullPage:!0,bgColor:""}),B=j(()=>({active:n.value.isLoading,fullPage:n.value.fullPage,...n.value.bgColor&&{backgroundColor:n.value.bgColor}})),E=()=>{n.value.isLoading=!0},D=()=>{n.value.isLoading=!1},T=l([]),v=a=>{E(),R.get(`https://api.kkbox.com/v1.1/charts/${a}/tracks?territory=TW`,f.value).then(i=>{T.value=i.data.data,x(()=>{A(),D()})})},_=l([]),$=()=>{R.get("https://api.kkbox.com/v1.1/charts?territory=TW",f.value).then(a=>{_.value=a.data.data})},C=O(),{singleRankData:r,isMusicPlaying:k}=H(C),{resetMusicTrackData:z}=C,u=l(null),S=async a=>{r.value.id!==a&&(k.value&&u.value.closeMusicModal(),r.value.id=a,r.value.autoplay=!0,k.value=!0,x(()=>{setTimeout(()=>{u.value.showMusicModal()},500)}))},F=()=>{z()},p=l(""),m=a=>{p.value=a},w=l("綜合新歌即時榜"),h=a=>{w.value=a},K=()=>{k.value&&u.value.closeMusicModal()},A=()=>{window.scrollTo({top:0,behavior:"smooth"})};return U(async()=>{f.value=await V(),v("LZPhK2EyYzN15dU-PT"),$(),h("綜合新歌即時榜"),m("LZPhK2EyYzN15dU-PT")}),W(()=>{K()}),(a,i)=>(o(),t(g,null,[d(J,Y(Z(B.value)),null,16),d(X),e("section",as,[e("div",ts,[i[1]||(i[1]=e("h2",{class:"fs-lg-2 fs-3 mb-7 mb-lg-9"},"KK music 熱門排行榜",-1)),e("div",os,[e("div",ls,[e("div",ns,[(o(!0),t(g,null,y(_.value,s=>(o(),t("a",{href:"#",key:s.id,class:M(["list-group-item list-group-item-action d-flex justify-content-between align-items-center link-light",{active:p.value===s.id}]),onClick:I(b=>{m(s.id),h(s.title),v(s.id)},["prevent"])},[P(c(s.title)+" ",1),s.title==="綜合新歌即時榜"?(o(),t("span",cs,"最熱門")):L("",!0)],10,is))),128))])]),e("div",rs,[e("ul",us,[(o(!0),t(g,null,y(_.value,s=>(o(),t("li",{key:s.id},[e("a",{class:M(["btn border btn-custom-info text-nowrap",{active:p.value===s.id}]),onClick:b=>{m(s.id),h(s.title),v(s.id)}},[P(c(s.title)+" ",1),s.title==="綜合新歌即時榜"?(o(),t("span",gs,"最熱門")):L("",!0)],10,ds)]))),128))])]),e("div",fs,[e("h2",vs,c(w.value),1),e("ul",_s,[(o(!0),t(g,null,y(T.value,(s,b)=>(o(),t("li",{class:"list-group-item d-flex align-items-center ranking-item",key:s.id},[e("h4",ks,c(b+1),1),e("div",ps,[e("img",{src:s.album.artist.images[0].url,alt:s.album.artist.name},null,8,ms),e("div",hs,[e("h5",bs,c(s.name),1),e("h6",ys,c(s.album.artist.name),1)])]),e("button",{type:"button",class:"btn btn-custom-play ms-auto",onClick:xs=>S(s.id)},i[0]||(i[0]=[e("i",{class:"bi bi-play-fill"},null,-1)]),8,Ts)]))),128))])])])]),d(es,{ref_key:"musicTrackModalRef",ref:u,"single-rank-data":q(r),onEmitCloseTrackMusicModal:F},null,8,["single-rank-data"])]),d(ss)],64))}},Vs=Q(Cs,[["__scopeId","data-v-ddef4a9f"]]);export{Vs as default};
